<?xml version="1.0" encoding="UTF-8"?>
<svg width="900" height="700" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="900" height="700" fill="#f8f9fa" stroke="none"/>
  
  <!-- Title -->
  <text x="450" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#1976d2">
    Diagramme de Séquence - Prise de Rendez-vous Patient
  </text>
  
  <!-- Actors/Objects -->
  <g id="actors">
    <!-- Patient -->
    <rect x="50" y="60" width="100" height="40" fill="#e3f2fd" stroke="#1976d2" stroke-width="2" rx="5"/>
    <text x="100" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#1976d2">
      Patient
    </text>
    
    <!-- Interface -->
    <rect x="200" y="60" width="100" height="40" fill="#e8f5e8" stroke="#388e3c" stroke-width="2" rx="5"/>
    <text x="250" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#388e3c">
      Interface
    </text>
    
    <!-- API Backend -->
    <rect x="350" y="60" width="100" height="40" fill="#fff3e0" stroke="#f57c00" stroke-width="2" rx="5"/>
    <text x="400" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#f57c00">
      API Backend
    </text>
    
    <!-- Base de Données -->
    <rect x="500" y="60" width="100" height="40" fill="#fce4ec" stroke="#e91e63" stroke-width="2" rx="5"/>
    <text x="550" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#e91e63">
      Base de Données
    </text>
    
    <!-- Notification -->
    <rect x="650" y="60" width="100" height="40" fill="#f3e5f5" stroke="#9c27b0" stroke-width="2" rx="5"/>
    <text x="700" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#9c27b0">
      Service Email
    </text>
  </g>
  
  <!-- Lifelines -->
  <line x1="100" y1="100" x2="100" y2="650" stroke="#666" stroke-width="2" stroke-dasharray="5,5"/>
  <line x1="250" y1="100" x2="250" y2="650" stroke="#666" stroke-width="2" stroke-dasharray="5,5"/>
  <line x1="400" y1="100" x2="400" y2="650" stroke="#666" stroke-width="2" stroke-dasharray="5,5"/>
  <line x1="550" y1="100" x2="550" y2="650" stroke="#666" stroke-width="2" stroke-dasharray="5,5"/>
  <line x1="700" y1="100" x2="700" y2="650" stroke="#666" stroke-width="2" stroke-dasharray="5,5"/>
  
  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
    </marker>
  </defs>
  
  <!-- Messages -->
  <g id="messages">
    <!-- 1. Rechercher médecin -->
    <line x1="100" y1="130" x2="250" y2="130" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <text x="175" y="125" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#333">
      1. Rechercher médecin
    </text>
    
    <!-- 2. Requête API -->
    <line x1="250" y1="150" x2="400" y2="150" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <text x="325" y="145" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#333">
      2. GET /api/medecins/search
    </text>
    
    <!-- 3. Requête BD -->
    <line x1="400" y1="170" x2="550" y2="170" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <text x="475" y="165" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#333">
      3. SELECT médecins
    </text>
    
    <!-- 4. Résultats -->
    <line x1="550" y1="190" x2="400" y2="190" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" stroke-dasharray="3,3"/>
    <text x="475" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#333">
      4. Résultats médecins
    </text>
    
    <!-- 5. Retour interface -->
    <line x1="400" y1="210" x2="250" y2="210" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" stroke-dasharray="3,3"/>
    <text x="325" y="205" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#333">
      5. Liste médecins
    </text>
    
    <!-- 6. Affichage -->
    <line x1="250" y1="230" x2="100" y2="230" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" stroke-dasharray="3,3"/>
    <text x="175" y="225" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#333">
      6. Afficher résultats
    </text>
    
    <!-- 7. Sélectionner médecin -->
    <line x1="100" y1="270" x2="250" y2="270" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <text x="175" y="265" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#333">
      7. Sélectionner médecin
    </text>
    
    <!-- 8. Voir disponibilités -->
    <line x1="250" y1="290" x2="400" y2="290" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <text x="325" y="285" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#333">
      8. GET /api/medecins/:id/disponibilites
    </text>
    
    <!-- 9. Vérifier créneaux -->
    <line x1="400" y1="310" x2="550" y2="310" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <text x="475" y="305" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#333">
      9. Vérifier créneaux libres
    </text>
    
    <!-- 10. Créneaux disponibles -->
    <line x1="550" y1="330" x2="400" y2="330" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" stroke-dasharray="3,3"/>
    <text x="475" y="325" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#333">
      10. Créneaux disponibles
    </text>
    
    <!-- 11. Afficher créneaux -->
    <line x1="400" y1="350" x2="250" y2="350" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" stroke-dasharray="3,3"/>
    <text x="325" y="345" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#333">
      11. Retourner créneaux
    </text>
    
    <!-- 12. Choisir créneau -->
    <line x1="100" y1="390" x2="250" y2="390" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <text x="175" y="385" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#333">
      12. Choisir créneau
    </text>
    
    <!-- 13. Créer RDV -->
    <line x1="250" y1="410" x2="400" y2="410" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <text x="325" y="405" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#333">
      13. POST /api/appointments
    </text>
    
    <!-- 14. Insérer BD -->
    <line x1="400" y1="430" x2="550" y2="430" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <text x="475" y="425" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#333">
      14. INSERT rendez_vous
    </text>
    
    <!-- 15. Confirmation BD -->
    <line x1="550" y1="450" x2="400" y2="450" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" stroke-dasharray="3,3"/>
    <text x="475" y="445" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#333">
      15. RDV créé
    </text>
    
    <!-- 16. Notification email -->
    <line x1="400" y1="470" x2="700" y2="470" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
    <text x="550" y="465" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#333">
      16. Envoyer email confirmation
    </text>
    
    <!-- 17. Email envoyé -->
    <line x1="700" y1="490" x2="400" y2="490" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" stroke-dasharray="3,3"/>
    <text x="550" y="485" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#333">
      17. Email envoyé
    </text>
    
    <!-- 18. Confirmation -->
    <line x1="400" y1="510" x2="250" y2="510" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" stroke-dasharray="3,3"/>
    <text x="325" y="505" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#333">
      18. RDV confirmé
    </text>
    
    <!-- 19. Message succès -->
    <line x1="250" y1="530" x2="100" y2="530" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" stroke-dasharray="3,3"/>
    <text x="175" y="525" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#333">
      19. Afficher confirmation
    </text>
  </g>
  
  <!-- Notes -->
  <rect x="50" y="570" width="800" height="70" fill="#fffde7" stroke="#fbc02d" stroke-width="1" rx="5"/>
  <text x="60" y="590" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#333">
    Notes importantes:
  </text>
  <text x="60" y="610" font-family="Arial, sans-serif" font-size="11" fill="#333">
    • Le système vérifie les conflits de créneaux en temps réel
  </text>
  <text x="60" y="625" font-family="Arial, sans-serif" font-size="11" fill="#333">
    • Notifications automatiques envoyées au patient et au médecin
  </text>
</svg> 